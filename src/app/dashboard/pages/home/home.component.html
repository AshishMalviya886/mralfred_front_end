<div class="content">
  <div class="d-flex justify-content-end p-2">
    <button (click)="logout()" class="logout-btn mt-2">
      <div class="d-flex align-items-center gap-2">
        <div>
          Logout
        </div>
        <div class="menu-icon">
          <svg xmlns="http://www.w3.org/2000/svg" class="mr-2" viewBox="0 0 512 512" height="15" width="15">
            <path d="M502.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-128-128c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L402.7 224 192 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l210.7 0-73.4 73.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l128-128zM160 96c17.7 0 32-14.3 32-32s-14.3-32-32-32L96 32C43 32 0 75 0 128L0 384c0 53 43 96 96 96l64 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-64 0c-17.7 0-32-14.3-32-32l0-256c0-17.7 14.3-32 32-32l64 0z"/>
          </svg>
        </div>
      </div>
    </button>
  </div>
  <div class="header d-flex align-items-center mt-2">
    <button class="btn btn-primary add-post" (click)="addPost()">
      Add Post
    </button>
  </div>
  <div class="mt-2">
    <div class="table-container">
      <table mat-table [dataSource]="dataSource" class="table-cls mat-elevation-z8">
        <ng-container matColumnDef="sno">
          <th mat-header-cell *matHeaderCellDef>
            <div class="display-class">
              Sno.
            </div>
          </th>
          <td mat-cell *matCellDef="let element; let i = index">
            <div class="display-class">
              {{ getSerialNumber(i) }}
            </div>
          </td>
        </ng-container>
        <ng-container matColumnDef="title">
          <th mat-header-cell *matHeaderCellDef>
            <div class="display-class">
              Title
            </div>
          </th>
          <td mat-cell *matCellDef="let element">
            <div class="display-class">
              {{ element.title }}
            </div>
          </td>
        </ng-container>
        <ng-container matColumnDef="description">
          <th mat-header-cell *matHeaderCellDef>
            <div class="display-class">
              Description
            </div>
          </th>
          <td mat-cell *matCellDef="let element">
            <div class="display-class">
              {{ element.description }}
            </div>
          </td>
        </ng-container>
        <ng-container matColumnDef="created_at">
          <th mat-header-cell *matHeaderCellDef>
            <div class="display-class">
              Created At
            </div>
          </th>
          <td mat-cell *matCellDef="let element">
            <div class="display-class">
              {{ element.created_at | date:'medium' }}
            </div>
          </td>
        </ng-container>
        <ng-container matColumnDef="actions">
          <th mat-header-cell *matHeaderCellDef>
            <div class="display-class">
              Actions
            </div>
          </th>
          <td mat-cell *matCellDef="let element; let i = index">
            <div class="actions">
              <button *ngIf="selectedRow !== i" (click)="selectRow(i, $event)" class="actions-btn">
                <mat-icon>more_vert</mat-icon>
              </button>
              <div *ngIf="selectedRow === i" class="action-icons">
                <div (click)="editPost(element.id); $event.stopPropagation()">
                  <img src="../../../../assets/images/edit.png" alt="" width="30" />
                </div>
                <div (click)="deletePost(element.id); $event.stopPropagation()">
                  <img src="../../../../assets/images/delete.png" alt="" width="30" />
                </div>
              </div>
            </div>
          </td>
        </ng-container>
        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
      </table>
    </div>
  </div>
  <nav aria-label="Page navigation">
    <ul class="pagination">
      <li class="page-item" [class.disabled]="currentPage === 1">
        <a class="page-link" (click)="changePage(currentPage - 1)" aria-label="Previous">
          <i class="bi bi-chevron-double-left"></i>
        </a>
      </li>
      <li class="page-item" *ngFor="let page of totalPages" [class.active]="currentPage === page">
        <a class="page-link" (click)="changePage(page)">{{ page }}</a>
      </li>
      <li class="page-item" [class.disabled]="currentPage === totalPages.length">
        <a class="page-link" (click)="changePage(currentPage + 1)" aria-label="Next">
          <i class="bi bi-chevron-double-right"></i>
        </a>
      </li>
    </ul>
  </nav>
</div>
